{"ast":null,"code":"var _jsxFileName = \"/home/jefferson/Desenvolvimento/websies2020-1/WEB_2020-1/IMPLEMENTACOES/aula-es-si/aula07-crud-firebase/src/components/List.jsx\";\nimport React, { Component } from 'react';\nimport TableRow from './TableRow';\nimport FirebaseContext from '../utils/FirebaseContext';\nimport FirebaseService from '../services/FirebaseService';\n\nconst ListPage = () => /*#__PURE__*/React.createElement(FirebaseContext.Consumer, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }\n}, firebase => /*#__PURE__*/React.createElement(List, {\n  firebase: firebase,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 22\n  }\n}));\n\nclass List extends Component {\n  constructor(props) {\n    super(props); //firebase\n\n    this.unscribe = null;\n    this._isMounted = false;\n    this.state = {\n      estudantes: [],\n      loading: false\n    };\n    this.apagarElementoPorId = this.apagarElementoPorId.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.setState({\n      loading: true\n    }); //firestore\n\n    /*this.ref = this.props.firebase.getFirestore().collection('estudantes')\n    this.unscribe = this.ref.onSnapshot(this.alimentarEstudantes.bind(this));*/\n\n    FirebaseService.list(this.props.firebase.getFirestore(), estudantes => {\n      this._isMounted && this.setState({\n        estudantes: estudantes,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n  /*alimentarEstudantes(query) {\n      let estudantes = []\n       query.forEach((doc) => {\n          const { nome, curso, IRA } = doc.data()\n          estudantes.push({\n              _id: doc.id,\n              nome,\n              curso,\n              IRA\n          })//push\n      })//forEach\n      this._isMounted && this.setState({ estudantes: estudantes, loading: false })\n  }*/\n\n\n  apagarElementoPorId(id) {\n    let tempEstudantes = this.state.estudantes;\n\n    for (let i = 0; i < tempEstudantes.length; i++) {\n      if (tempEstudantes[i]._id === id) {\n        tempEstudantes.splice(i, 1);\n      }\n    }\n\n    this._isMounted && this.setState({\n      estudantes: tempEstudantes\n    });\n  }\n\n  montarTabela() {\n    if (!this.state.estudantes) return;\n    if (this.state.loading) return this.loadingSpinner();\n    return this.state.estudantes.map((est, i) => {\n      return /*#__PURE__*/React.createElement(TableRow, {\n        estudante: est,\n        key: i,\n        apagarElementoPorId: this.apagarElementoPorId,\n        firebase: this.props.firebase,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 24\n        }\n      });\n    });\n  }\n\n  loadingSpinner() {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        backgroundColor: '#fff'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border ml-auto\",\n      role: \"status\",\n      \"aria-hidden\": \"true\",\n      style: {\n        width: '3rem',\n        height: '3rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 77\n      }\n    }), /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }, \"Loading...\"))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, \"Listar Estudantes\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    }, \"Nome\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }, \"Curso\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 29\n      }\n    }, \"IRA\"), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, this.montarTabela())));\n  }\n\n}\n\nexport default ListPage;","map":{"version":3,"sources":["/home/jefferson/Desenvolvimento/websies2020-1/WEB_2020-1/IMPLEMENTACOES/aula-es-si/aula07-crud-firebase/src/components/List.jsx"],"names":["React","Component","TableRow","FirebaseContext","FirebaseService","ListPage","firebase","List","constructor","props","unscribe","_isMounted","state","estudantes","loading","apagarElementoPorId","bind","componentDidMount","setState","list","getFirestore","componentWillUnmount","id","tempEstudantes","i","length","_id","splice","montarTabela","loadingSpinner","map","est","backgroundColor","width","height","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport TableRow from './TableRow'\nimport FirebaseContext from '../utils/FirebaseContext'\nimport FirebaseService from '../services/FirebaseService'\n\nconst ListPage = () => (\n    <FirebaseContext.Consumer>\n        {firebase => <List firebase={firebase} />}\n    </FirebaseContext.Consumer>\n)\n\nclass List extends Component {\n\n    constructor(props) {\n        super(props)\n\n        //firebase\n        this.unscribe = null\n        this._isMounted = false\n\n        this.state = { estudantes: [], loading: false }\n        this.apagarElementoPorId = this.apagarElementoPorId.bind(this)\n    }\n\n    componentDidMount() {\n        this._isMounted = true\n        this.setState({ loading: true })\n\n        //firestore\n        /*this.ref = this.props.firebase.getFirestore().collection('estudantes')\n        this.unscribe = this.ref.onSnapshot(this.alimentarEstudantes.bind(this));*/\n        FirebaseService.list(this.props.firebase.getFirestore(),\n            (estudantes) => {\n                this._isMounted && this.setState({ estudantes: estudantes, loading: false })\n            })\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false\n    }\n\n    /*alimentarEstudantes(query) {\n        let estudantes = []\n\n        query.forEach((doc) => {\n            const { nome, curso, IRA } = doc.data()\n            estudantes.push({\n                _id: doc.id,\n                nome,\n                curso,\n                IRA\n            })//push\n        })//forEach\n        this._isMounted && this.setState({ estudantes: estudantes, loading: false })\n    }*/\n\n    apagarElementoPorId(id) {\n        let tempEstudantes = this.state.estudantes\n        for (let i = 0; i < tempEstudantes.length; i++) {\n            if (tempEstudantes[i]._id === id) {\n                tempEstudantes.splice(i, 1)\n            }\n        }\n        this._isMounted && this.setState({ estudantes: tempEstudantes })\n    }\n\n    montarTabela() {\n        if (!this.state.estudantes) return\n        if (this.state.loading) return this.loadingSpinner()\n        return this.state.estudantes.map(\n            (est, i) => {\n                return <TableRow estudante={est}\n                    key={i}\n                    apagarElementoPorId={this.apagarElementoPorId}\n                    firebase={this.props.firebase} />\n            }\n        )\n    }\n\n    loadingSpinner() {\n        return (\n            <tr style={{ backgroundColor: '#fff' }}>\n                <td colSpan='6'>\n                    <div className=\"text-center\">\n\n                        <div className=\"spinner-border ml-auto\"\n                            role=\"status\"\n                            aria-hidden=\"true\"\n                            style={{ width: '3rem', height: '3rem' }}></div><br />\n                        <strong>Loading...</strong>\n                    </div>\n                </td>\n            </tr>\n        )\n    }\n\n    render() {\n        return (\n            <div style={{ marginTop: 10 }}>\n                <h3>Listar Estudantes</h3>\n\n                <table className=\"table table-striped\" style={{ marginTop: 20 }}>\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>Nome</th>\n                            <th>Curso</th>\n                            <th>IRA</th>\n                            <th colSpan=\"2\"></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.montarTabela()}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nexport default ListPage"]},"metadata":{},"sourceType":"module"}