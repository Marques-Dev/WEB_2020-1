{"ast":null,"code":"var _jsxFileName = \"/home/jefferson/Desenvolvimento/websies2020-1/WEB_2020-1/IMPLEMENTACOES/aula-es-si/aula07-crud-firebase/src/components/List.jsx\";\nimport React, { Component } from 'react';\nimport TableRow from './TableRow';\nimport FirebaseContext from '../utils/FirebaseContext';\n\nconst ListPage = () => /*#__PURE__*/React.createElement(FirebaseContext.Consumer, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 5\n  }\n}, firebase => /*#__PURE__*/React.createElement(List, {\n  firebase: firebase,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 22\n  }\n}));\n\nclass List extends Component {\n  constructor(props) {\n    super(props); //firebase\n\n    this.unscribe = null;\n    this._isMounted = false;\n    this.ref = this.props.firebase.getFirestore().collection('estudantes');\n    this.state = {\n      estudantes: []\n    };\n    this.apagarElementoPorId = this.apagarElementoPorId.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.unscribe = this.ref.onSnapshot(this.alimentarEstudantes.bind(this));\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  alimentarEstudantes(query) {\n    let estudantes = [];\n    query.forEach(doc => {\n      const {\n        nome,\n        curso,\n        IRA\n      } = doc.data();\n      estudantes.push({\n        _id: doc.id,\n        nome,\n        curso,\n        IRA\n      }); //push\n    }); //forEach\n\n    this._isMounted && this.setState({\n      estudantes: estudantes\n    });\n  }\n\n  apagarElementoPorId(id) {\n    let tempEstudantes = this.state.estudantes;\n\n    for (let i = 0; i < tempEstudantes.length; i++) {\n      if (tempEstudantes[i]._id === id) {\n        tempEstudantes.splice(i, 1);\n      }\n    }\n\n    this._isMounted && this.setState({\n      estudantes: tempEstudantes\n    });\n  }\n\n  montarTabela() {\n    if (!this.state.estudantes) return;\n    return this.state.estudantes.map((est, i) => {\n      return /*#__PURE__*/React.createElement(TableRow, {\n        estudante: est,\n        key: i,\n        apagarElementoPorId: this.apagarElementoPorId,\n        firebase: this.props.firebase,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 24\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"Listar Estudantes\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 3\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border ml-auto\",\n      role: \"status\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }, \"Nome\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, \"Curso\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, \"IRA\"), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, this.montarTabela())));\n  }\n\n}\n\nexport default ListPage;","map":{"version":3,"sources":["/home/jefferson/Desenvolvimento/websies2020-1/WEB_2020-1/IMPLEMENTACOES/aula-es-si/aula07-crud-firebase/src/components/List.jsx"],"names":["React","Component","TableRow","FirebaseContext","ListPage","firebase","List","constructor","props","unscribe","_isMounted","ref","getFirestore","collection","state","estudantes","apagarElementoPorId","bind","componentDidMount","onSnapshot","alimentarEstudantes","componentWillUnmount","query","forEach","doc","nome","curso","IRA","data","push","_id","id","setState","tempEstudantes","i","length","splice","montarTabela","map","est","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport TableRow from './TableRow'\nimport FirebaseContext from '../utils/FirebaseContext'\n\nconst ListPage = () => (\n    <FirebaseContext.Consumer>\n        {firebase => <List firebase={firebase} />}\n    </FirebaseContext.Consumer>\n)\n\nclass List extends Component {\n\n    constructor(props) {\n        super(props)\n\n        //firebase\n        this.unscribe = null\n        this._isMounted = false\n        this.ref = this.props.firebase.getFirestore().collection('estudantes')\n\n        this.state = { estudantes: [] }\n        this.apagarElementoPorId = this.apagarElementoPorId.bind(this)\n    }\n\n    componentDidMount() {\n        this._isMounted = true\n        this.unscribe = this.ref.onSnapshot(this.alimentarEstudantes.bind(this));\n    }\n\n    componentWillUnmount(){\n        this._isMounted = false\n    }\n\n    alimentarEstudantes(query) {\n        let estudantes = []\n        query.forEach((doc) => {\n            const { nome, curso, IRA } = doc.data()\n            estudantes.push({\n                _id: doc.id,\n                nome,\n                curso,\n                IRA\n            })//push\n        })//forEach\n        this._isMounted && this.setState({ estudantes: estudantes })\n    }\n\n    apagarElementoPorId(id) {\n        let tempEstudantes = this.state.estudantes\n        for (let i = 0; i < tempEstudantes.length; i++) {\n            if (tempEstudantes[i]._id === id) {\n                tempEstudantes.splice(i, 1)\n            }\n        }\n        this._isMounted && this.setState({ estudantes: tempEstudantes })\n    }\n\n    montarTabela() {\n        if (!this.state.estudantes) return\n        return this.state.estudantes.map(\n            (est, i) => {\n                return <TableRow estudante={est}\n                    key={i}\n                    apagarElementoPorId={this.apagarElementoPorId}\n                    firebase={this.props.firebase} />\n            }\n        )\n    }\n\n    render() {\n        return (\n            <div style={{ marginTop: 10 }}>\n                <h3>Listar Estudantes</h3>\n                <div class=\"d-flex align-items-center\">\n  <strong>Loading...</strong>\n  <div class=\"spinner-border ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n</div>\n                <table className=\"table table-striped\" style={{ marginTop: 20 }}>\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>Nome</th>\n                            <th>Curso</th>\n                            <th>IRA</th>\n                            <th colSpan=\"2\"></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.montarTabela()}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nexport default ListPage"]},"metadata":{},"sourceType":"module"}